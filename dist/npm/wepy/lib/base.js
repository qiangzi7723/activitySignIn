"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _event=require("./event.js"),_event2=_interopRequireDefault(_event),PREFIX="$",JOIN="$",prefixList={},comCount=0,$getPrefix=function(e){return e},pageEvent=["onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom"],$bindEvt=function e(t,n,r){n.$prefix=$getPrefix(r),Object.getOwnPropertyNames(n.components||{}).forEach(function(o){var a=n.components[o],i=new a;i.initMixins(),i.$name=o;var p=r?r+i.$name+"$":"$"+i.$name+"$";$getPrefix(p),n.$com[o]=i,e(t,i,p)}),Object.getOwnPropertyNames(n.constructor.prototype||[]).forEach(function(e){"constructor"!==e&&pageEvent.indexOf(e)===-1&&(t[e]=function(){n.constructor.prototype[e].apply(n,arguments),n.$apply()})});var o=Object.getOwnPropertyNames(n.methods||[]);return n.$mixins.forEach(function(e){o=o.concat(Object.getOwnPropertyNames(e.methods||[]))}),o.forEach(function(e,r){t[n.$prefix+e]=function(t){for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];var i=new _event2.default("system",this,t.type);i.$transfor(t);var p=[],c=0,s=void 0,u=void 0;if(t.currentTarget&&t.currentTarget.dataset)for(s=t.currentTarget.dataset;void 0!==s["wepyParams"+(u=String.fromCharCode(65+c++))];)p.push(s["wepyParams"+u]);o=o.concat(p);var f=void 0,$=void 0,d=n.methods[e];return d&&(f=d.apply(n,o.concat(i))),n.$mixins.forEach(function(t){t.methods[e]&&($=t.methods[e].apply(n,o))}),n.$apply(),d?f:$}}),t};exports.default={$createApp:function(e){var t={},n=new e;return this.$instance||(n.init(this),this.$instance=n),Object.getOwnPropertyNames(n.constructor.prototype).forEach(function(e){"constructor"!==e&&(t[e]=n.constructor.prototype[e])}),t.$app=n,n.$wxapp=getApp(),t},$createPage:function(e){var t={},n=new e;n.initMixins();var r=this;return t.$page=n,t.onLoad=function(){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];n.$name=e.name||"unnamed",n.init(this,r.$instance,r.$instance),n.onLoad&&n.onLoad.apply(n,o),n.$mixins.forEach(function(e){e.onLoad&&e.onLoad.apply(n,o)}),n.$apply()},pageEvent.forEach(function(e){"onLoad"!==e&&(t[e]=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=void 0;return n[e]&&(a=n[e].apply(n,r)),n.$mixins.forEach(function(t){t[e]&&t[e].apply(n,r)}),n.$apply(),a})}),n.onShareAppMessage&&(t.onShareAppMessage=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.onShareAppMessage.apply(n,t)}),$bindEvt(t,n,"")}};